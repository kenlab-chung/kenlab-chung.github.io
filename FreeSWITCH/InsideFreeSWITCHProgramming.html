<!--
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Inside FreeSWITCH Programming</title>
    <script src="https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js"></script>
</head>
<body>
    <div id="markdown-content"></div>

    <script>
        // 创建 Showdown 实例
        const converter = new showdown.Converter();

        // 加载 Markdown 文件
        fetch('InsideFreeSWITCHProgramming.md')
            .then(response => response.text())
            .then(text => {
                // 手动将 Markdown 转换为 HTML
                const html = converter.makeHtml(text);
                // 将转换后的 HTML 显示在页面上
                document.getElementById('markdown-content').innerHTML = html;
            })
            .catch(error => {
                console.error('Error fetching the Markdown file:', error);
            });
    </script>

     <div align="center">
         © 2010-2024 kenlab-chung.github.io. All rights reserved.
     </div>
</body>
</html>
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Inside FreeSWITCH Programming</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div id="markdown-content"></div>
    <div id="toc" style="float: right; margin-left: 20px;"></div>

    <script>
        // 加载 Markdown 文件
        fetch('InsideFreeSWITCHProgramming.md')
            .then(response => response.text())
            .then(text => {
                // 将 Markdown 转换为 HTML
                const html = marked(text);
                // 将转换后的 HTML 显示在页面上
                $('#markdown-content').html(html);

                // 提取标题并生成目录
                const toc = [];
                const headings = $('h1, h2, h3, h4, h5, h6', '#markdown-content');
                headings.each(function() {
                    const id = $(this).attr('id');
                    const level = parseInt(this.tagName.substr(1));
                    toc.push({
                        id: id,
                        text: $(this).text(),
                        level: level
                    });
                });

                // 在右侧生成目录
                const tocHtml = toc.map(item => {
                    const indent = (item.level - 1) * 20;
                    return `<div style="margin-left: ${indent}px;"><a href="#${item.id}">${item.text}</a></div>`;
                }).join('');
                $('#toc').html('<h2>Table of Contents</h2>' + tocHtml);
            })
            .catch(error => {
                console.error('Error fetching the Markdown file:', error);
            });
    </script>
</body>
</html>
